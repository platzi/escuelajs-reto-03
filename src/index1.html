<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Corrección de Errores</title>
    <script>
      var API = 'https://rickandmortyapi.com/api/character/';
      var xhttp = new XMLHttpRequest();

      function fetchData(url_api, callback) {
        xhttp.onreadystatechange = function(event) {
          if (xhttp.readyState === 4) {
            if (xhttp.status == 200) {
              callback(null, xhttp.response);
            } else {
              return callback(url_api);
            }
          }
        };
        xhttp.open('GET', url_api, false);
        xhttp.send();
      }

      fetchData(API, function(error1, data1) {
        if (error1) {
          return console.error('Error' + ' ' + error1);
        } else {
          console.log('Primer Llamado...');
          data1 = JSON.parse(data1);
          fetchData(API + data1.results[0].id, function(error2, data2) {
            if (error2) {
              return console.error(error2);
            } else {
              console.log('Segundo Llamado...');
              data2 = JSON.parse(data2);
              fetchData(data2.origin.url, function(error3, data3) {
                data3 = JSON.parse(data3);
                if (error3) {
                  return console.error(error3);
                } else {
                  console.log('Tercero Llamado...');
                  console.log('Personajes:' + ' ' + data1.info.count);
                  console.log('Primer Personaje:' + ' ' + data2.name);
                  console.log('Dimensión:' + ' ' + data3.dimension);
                }
              });
            }
          });
        }
      });
    </script>
  </head>
  <body></body>
</html>
